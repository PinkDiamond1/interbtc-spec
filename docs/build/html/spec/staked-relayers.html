

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Staked Relayers &mdash; BTC Parachain Specification  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Treasury" href="treasury.html" />
    <link rel="prev" title="SLA" href="sla.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: grey" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> BTC Parachain Specification
          

          
          </a>

          
            
            
              <div class="version">
                v4.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/at-a-glance.html">BTC Parachain at a Glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/CbA.html">Cryptocurrency-backed Assets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/polkadot.html">Polkadot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/architecture.html">Architecture</a></li>
</ul>
<p class="caption"><span class="caption-text">Specification</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">How to read this specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="btc-relay.html">BTC-Relay</a></li>
<li class="toctree-l1"><a class="reference internal" href="collateral.html">Collateral</a></li>
<li class="toctree-l1"><a class="reference internal" href="fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="oracle.html">Exchange Rate Oracle</a></li>
<li class="toctree-l1"><a class="reference internal" href="issue.html">Issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="nomination.html">Vault Nomination</a></li>
<li class="toctree-l1"><a class="reference internal" href="redeem.html">Redeem</a></li>
<li class="toctree-l1"><a class="reference internal" href="refund.html">Refund</a></li>
<li class="toctree-l1"><a class="reference internal" href="replace.html">Replace</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="sla.html">SLA</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Staked Relayers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-model">Data Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#structs">Structs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#stakedrelayer">StakedRelayer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-storage">Data Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#constants">Constants</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#staked-relayer-stake">STAKED_RELAYER_STAKE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#maps">Maps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#stakedrelayers">StakedRelayers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#theftreports">TheftReports</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#registerstakedrelayer">registerStakedRelayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specification">Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preconditions">Preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-sequence">Function Sequence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deregisterstakedrelayer">deRegisterStakedRelayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Preconditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Function Sequence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#slashstakedrelayer">slashStakedRelayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Function Sequence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reportvaulttheft">reportVaultTheft</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Function Sequence</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#events">Events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">RegisterStakedRelayer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">DeRegisterStakedRelayer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">SlashStakedRelayer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">ReportVaultTheft</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#errors">Errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="treasury.html">Treasury</a></li>
<li class="toctree-l1"><a class="reference internal" href="vault-registry.html">Vault Registry</a></li>
</ul>
<p class="caption"><span class="caption-text">Security and Performance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/liquidations.html">Vault Liquidations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/security-analysis.html">Security Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/performance.html">Performance Analysis</a></li>
</ul>
<p class="caption"><span class="caption-text">Economics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../economics/incentives.html">Economic Incentives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../economics/fees.html">Fee Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../economics/SLA.html">Service Level Agreements</a></li>
</ul>
<p class="caption"><span class="caption-text">All the rest</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/interlay.html">Interlay</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BTC Parachain Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Staked Relayers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/spec/staked-relayers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="staked-relayers">
<span id="id1"></span><h1>Staked Relayers<a class="headerlink" href="#staked-relayers" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#staked-relayers"><span class="std std-ref">Staked Relayers</span></a> module is responsible for handling the registration and staking of Staked Relayers.
It also wraps functions for Staked Relayers to submit Bitcoin block headers to the <a class="reference internal" href="btc-relay.html#btc-relay"><span class="std std-ref">BTC-Relay</span></a>.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><strong>Staked Relayers</strong> are participants whose main role it is to run Bitcoin full nodes and:</p>
<blockquote>
<div><blockquote>
<div><ol class="arabic simple">
<li><p>Submit valid Bitcoin block headers to increase their <a class="reference internal" href="sla.html#sla"><span class="std std-ref">SLA</span></a> score.</p></li>
<li><p>Check vaults do not move BTC, unless expressly requested during <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>, <a class="reference internal" href="replace.html#replace-protocol"><span class="std std-ref">Replace</span></a> or <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a>.</p></li>
</ol>
</div></blockquote>
<p>In the second case, a single staked relayer report suffices - the module should check the accusation (using a Merkle proof), and liquidate the vault if valid.</p>
</div></blockquote>
<p>Staked Relayers are overseen by the Parachain <strong>Governance Mechanism</strong>.
The Governance Mechanism also votes on critical changes to the architecture or unexpected failures, e.g. hard forks or detected 51% attacks (if a fork exceeds the specified security parameter <em>k</em>, see <a class="reference external" href="https://interlay.gitlab.io/interbtc-spec/btcrelay-spec/security_performance/security.html#security-parameter-k">Security Parameter k</a>.).</p>
</div>
<div class="section" id="data-model">
<h2>Data Model<a class="headerlink" href="#data-model" title="Permalink to this headline">¶</a></h2>
<div class="section" id="structs">
<h3>Structs<a class="headerlink" href="#structs" title="Permalink to this headline">¶</a></h3>
<div class="section" id="stakedrelayer">
<h4>StakedRelayer<a class="headerlink" href="#stakedrelayer" title="Permalink to this headline">¶</a></h4>
<p>Stores the information of a Staked Relayer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 9%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stake</span></code></p></td>
<td><p>Backing</p></td>
<td><p>Total amount of collateral/stake provided by this Staked Relayer.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="data-storage">
<h2>Data Storage<a class="headerlink" href="#data-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="constants">
<h3>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h3>
<div class="section" id="staked-relayer-stake">
<h4>STAKED_RELAYER_STAKE<a class="headerlink" href="#staked-relayer-stake" title="Permalink to this headline">¶</a></h4>
<p>Integer denoting the minimum stake which Staked Relayers must provide when registering.</p>
</div>
</div>
<div class="section" id="maps">
<h3>Maps<a class="headerlink" href="#maps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="stakedrelayers">
<h4>StakedRelayers<a class="headerlink" href="#stakedrelayers" title="Permalink to this headline">¶</a></h4>
<p>Mapping from accounts of StakedRelayers to their struct. <code class="docutils literal notranslate"><span class="pre">&lt;Account,</span> <span class="pre">StakedRelayer&gt;</span></code>.</p>
</div>
<div class="section" id="theftreports">
<h4>TheftReports<a class="headerlink" href="#theftreports" title="Permalink to this headline">¶</a></h4>
<p>Mapping of Bitcoin transaction identifiers (SHA256 hashes) to account identifiers of Vaults who have been caught stealing Bitcoin.
Per Bitcoin transaction, multiple Vaults can be accused (multiple inputs can come from multiple Vaults).
This mapping is necessary to prevent duplicate theft reports.</p>
</div>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="registerstakedrelayer">
<span id="id2"></span><h3>registerStakedRelayer<a class="headerlink" href="#registerstakedrelayer" title="Permalink to this headline">¶</a></h3>
<p>Registers a new Staked Relayer, locking the provided collateral, which must exceed <code class="docutils literal notranslate"><span class="pre">STAKED_RELAYER_STAKE</span></code>.</p>
<div class="section" id="specification">
<h4>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h4>
<p><em>Function Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">registerStakedRelayer(stakedRelayer,</span> <span class="pre">stake)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>: The account of the staked relayer to be registered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stake</span></code>: to-be-locked collateral/stake.</p></li>
</ul>
<p><em>Events</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RegisterStakedRelayer(StakedRelayer,</span> <span class="pre">collateral)</span></code>: emit an event stating that a new staked relayer (<code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>) was registered and provide information on the Staked Relayer’s stake (<code class="docutils literal notranslate"><span class="pre">stake</span></code>).</p></li>
</ul>
<p><em>Errors</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_REGISTERED</span> <span class="pre">=</span> <span class="pre">&quot;This</span> <span class="pre">AccountId</span> <span class="pre">is</span> <span class="pre">already</span> <span class="pre">registered</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">Staked</span> <span class="pre">Relayer&quot;</span></code>: The given account identifier is already registered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_INSUFFICIENT_STAKE</span> <span class="pre">=</span> <span class="pre">&quot;Insufficient</span> <span class="pre">stake</span> <span class="pre">provided&quot;</span></code>: The provided stake was insufficient - it must be above <code class="docutils literal notranslate"><span class="pre">STAKED_RELAYER_STAKE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="preconditions">
<h4>Preconditions<a class="headerlink" href="#preconditions" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="function-sequence">
<h4>Function Sequence<a class="headerlink" href="#function-sequence" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">registerStakedRelayer</span></code> function takes as input an AccountID and collateral amount (to be used as stake) to register a new staked relayer in the system.</p>
<ol class="arabic simple">
<li><p>Check that the <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> is not already in <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code>. Return <code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_REGISTERED</span></code> if this check fails.</p></li>
<li><p>Check that <code class="docutils literal notranslate"><span class="pre">stake</span> <span class="pre">&gt;</span> <span class="pre">STAKED_RELAYER_STAKE</span></code> holds, i.e., the staked relayer provided sufficient collateral. Return <code class="docutils literal notranslate"><span class="pre">ERR_INSUFFICIENT_STAKE</span></code> error if this check fails.</p></li>
<li><p>Lock the stake/collateral by calling <a class="reference internal" href="collateral.html#lockcollateral"><span class="std std-ref">lockCollateral</span></a> and passing <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> and the <code class="docutils literal notranslate"><span class="pre">stake</span></code> as parameters.</p></li>
<li><p>Store the provided information (amount of <code class="docutils literal notranslate"><span class="pre">stake</span></code>) in a new <code class="docutils literal notranslate"><span class="pre">StakedRelayer</span></code> and insert it into the <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code> mapping using the <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> AccountId as key.</p></li>
<li><p>Emit a <code class="docutils literal notranslate"><span class="pre">RegisterStakedRelayer(StakedRelayer,</span> <span class="pre">collateral)</span></code> event.</p></li>
</ol>
</div>
</div>
<div class="section" id="deregisterstakedrelayer">
<span id="id3"></span><h3>deRegisterStakedRelayer<a class="headerlink" href="#deregisterstakedrelayer" title="Permalink to this headline">¶</a></h3>
<p>De-registers a Staked Relayer, releasing the associated stake.</p>
<div class="section" id="id4">
<h4>Specification<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><em>Function Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">registerStakedRelayer(stakedRelayer)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>: The account of the staked relayer to be de-registered.</p></li>
</ul>
<p><em>Events</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DeRegisterStakedRelayer(StakedRelayer)</span></code>: emit an event stating that a staked relayer has been de-registered (<code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>).</p></li>
</ul>
<p><em>Errors</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_NOT_REGISTERED</span> <span class="pre">=</span> <span class="pre">&quot;This</span> <span class="pre">AccountId</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">registered</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">Staked</span> <span class="pre">Relayer&quot;</span></code>: The given account identifier is not registered.</p></li>
</ul>
</div>
<div class="section" id="id5">
<h4>Preconditions<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="id6">
<h4>Function Sequence<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Check if the <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> is indeed registered in <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code>. Return <code class="docutils literal notranslate"><span class="pre">ERR_NOT_REGISTERED</span></code> if this check fails.</p></li>
</ol>
<ol class="arabic simple" start="3">
<li><p>Release the stake/collateral of the <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> by calling <a class="reference internal" href="collateral.html#lockcollateral"><span class="std std-ref">lockCollateral</span></a> and passing <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> and the <code class="docutils literal notranslate"><span class="pre">StakeRelayer.stake</span></code> (as retrieved from <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code>) as parameters.</p></li>
<li><p>Remove the entry from <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code> which has <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> as key.</p></li>
<li><p>Emit a <code class="docutils literal notranslate"><span class="pre">DeRegisterStakedRelayer(StakedRelayer)</span></code> event.</p></li>
</ol>
</div>
</div>
<div class="section" id="slashstakedrelayer">
<span id="id7"></span><h3>slashStakedRelayer<a class="headerlink" href="#slashstakedrelayer" title="Permalink to this headline">¶</a></h3>
<p>Slashes the stake/collateral of a staked relayer and removes them from the staked relayer list (mapping).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function can only be called by the Governance Mechanism.</p>
</div>
<div class="section" id="id8">
<h4>Specification<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p><em>Function Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">slashStakedRelayer(governanceMechanism,</span> <span class="pre">stakedRelayer)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">governanceMechanism</span></code>: The AccountId of the Governance Mechanism.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>: The account of the staked relayer to be slashed.</p></li>
</ul>
<p><em>Events</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SlashStakedRelayer(stakedRelayer)</span></code>: emits an event indicating that a given staked relayer (<code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>) has been slashed and removed from <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code>.</p></li>
</ul>
<p><em>Errors</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_GOVERNANCE_ONLY</span> <span class="pre">=</span> <span class="pre">This</span> <span class="pre">action</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">executed</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">Governance</span> <span class="pre">Mechanism</span></code>: Only the Governance Mechanism can slash Staked Relayers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_NOT_REGISTERED</span> <span class="pre">=</span> <span class="pre">&quot;This</span> <span class="pre">AccountId</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">registered</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">Staked</span> <span class="pre">Relayer&quot;</span></code>: The given account identifier is not registered.</p></li>
</ul>
</div>
<div class="section" id="id9">
<h4>Function Sequence<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Check that the caller of this function is indeed the Governance Mechanism. Return <code class="docutils literal notranslate"><span class="pre">ERR_GOVERNANCE_ONLY</span></code> if this check fails.</p></li>
<li><p>Retrieve the staked relayer with the given account identifier (<code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>) from <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code>. Return <code class="docutils literal notranslate"><span class="pre">ERR_NOT_REGISTERED</span></code> if not staked relayer with the given identifier can be found.</p></li>
<li><p>Confiscate the Staked Relayer’s collateral. For this, call <a class="reference internal" href="collateral.html#slashcollateral"><span class="std std-ref">slashCollateral</span></a> providing <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> and <code class="docutils literal notranslate"><span class="pre">governanceMechanism</span></code> as parameters.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code> from <code class="docutils literal notranslate"><span class="pre">StakedRelayers</span></code></p></li>
<li><p>Emit <code class="docutils literal notranslate"><span class="pre">SlashStakedRelayer(stakedRelayer)</span></code> event.</p></li>
</ol>
</div>
</div>
<div class="section" id="reportvaulttheft">
<span id="id10"></span><h3>reportVaultTheft<a class="headerlink" href="#reportvaulttheft" title="Permalink to this headline">¶</a></h3>
<p>A staked relayer reports misbehavior by a vault, providing a fraud proof (malicious Bitcoin transaction and the corresponding transaction inclusion proof).</p>
<p>A vault is not allowed to move BTC from any registered Bitcoin address (as specified by <code class="docutils literal notranslate"><span class="pre">Vault.wallet</span></code>), except in the following three cases:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The vault is executing a <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>. In this case, we can link the transaction to a <code class="docutils literal notranslate"><span class="pre">RedeemRequest</span></code> and check the correct recipient.</p></li>
<li><p>The vault is executing a <a class="reference internal" href="replace.html#replace-protocol"><span class="std std-ref">Replace</span></a>. In this case, we can link the transaction to a <code class="docutils literal notranslate"><span class="pre">ReplaceRequest</span></code> and check the correct recipient.</p></li>
<li><p>The vault is executing a <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a>. In this case, we can link the transaction to a <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code> and check the correct recipient.</p></li>
<li><p>[Optional] The vault is “merging” multiple UTXOs it controls into a single / multiple UTXOs it controls, e.g. for maintenance. In this case, the recipient address of all outputs (e.g. <code class="docutils literal notranslate"><span class="pre">P2PKH</span></code> / <code class="docutils literal notranslate"><span class="pre">P2WPKH</span></code>) must be the same Vault.</p></li>
</ol>
</div></blockquote>
<p>In all other cases, the vault is considered to have stolen the BTC.</p>
<p>This function checks if the vault actually misbehaved (i.e., makes sure that the provided transaction is not one of the above valid cases) and automatically liquidates the vault (i.e., triggers <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>).</p>
<div class="section" id="id11">
<h4>Specification<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p><em>Function Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">reportVaultTheft(vault,</span> <span class="pre">merkleProof,</span> <span class="pre">rawTx)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vaultId</span></code>: the account of the accused Vault.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">merkleProof</span></code>: Merkle tree path (concatenated LE SHA256 hashes).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rawTx</span></code>: Raw Bitcoin transaction including the transaction inputs and outputs.</p></li>
</ul>
<p><em>Events</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ReportVaultTheft(vault)</span></code> - emits an event indicating that a vault (<code class="docutils literal notranslate"><span class="pre">vault</span></code>) has been caught displacing BTC without permission.</p></li>
</ul>
<p><em>Errors</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_STAKED_RELAYERS_ONLY</span> <span class="pre">=</span> <span class="pre">&quot;This</span> <span class="pre">action</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">executed</span> <span class="pre">by</span> <span class="pre">Staked</span> <span class="pre">Relayers&quot;</span></code>: The caller of this function was not a Staked Relayer. Only Staked Relayers are allowed to suggest and vote on BTC Parachain status updates.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_REPORTED</span> <span class="pre">=</span> <span class="pre">&quot;This</span> <span class="pre">txId</span> <span class="pre">has</span> <span class="pre">already</span> <span class="pre">been</span> <span class="pre">logged</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">theft</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">given</span> <span class="pre">Vault&quot;</span></code>: This transaction / vault combination has already been reported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_VAULT_NOT_FOUND</span> <span class="pre">=</span> <span class="pre">&quot;There</span> <span class="pre">exists</span> <span class="pre">no</span> <span class="pre">vault</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">given</span> <span class="pre">account</span> <span class="pre">id&quot;</span></code>: The specified vault does not exist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_LIQUIDATED</span> <span class="pre">=</span> <span class="pre">&quot;This</span> <span class="pre">vault</span> <span class="pre">is</span> <span class="pre">already</span> <span class="pre">being</span> <span class="pre">liquidated</span></code>: The specified vault is already being liquidated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_REDEEM</span> <span class="pre">=</span> <span class="pre">&quot;The</span> <span class="pre">given</span> <span class="pre">transaction</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">Redeem</span> <span class="pre">execution</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">accused</span> <span class="pre">Vault&quot;</span></code>: The given transaction is associated with a valid <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_REPLACE</span> <span class="pre">=</span> <span class="pre">&quot;The</span> <span class="pre">given</span> <span class="pre">transaction</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">Replace</span> <span class="pre">execution</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">accused</span> <span class="pre">Vault&quot;</span></code>: The given transaction is associated with a valid <a class="reference internal" href="replace.html#replace-protocol"><span class="std std-ref">Replace</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_REFUND</span> <span class="pre">=</span> <span class="pre">&quot;The</span> <span class="pre">given</span> <span class="pre">transaction</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">Refund</span> <span class="pre">execution</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">accused</span> <span class="pre">Vault&quot;</span></code>: The given transaction is associated with a valid <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_MERGE_TRANSACTION</span> <span class="pre">=</span> <span class="pre">&quot;The</span> <span class="pre">given</span> <span class="pre">transaction</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">'UTXO</span> <span class="pre">merge'</span> <span class="pre">transaction</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">accused</span> <span class="pre">Vault&quot;</span></code>: The given transaction represents an allowed “merging” of UTXOs by the accused vault (no BTC was displaced).</p></li>
</ul>
</div>
<div class="section" id="id12">
<h4>Function Sequence<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Check that the caller of this function is indeed a Staked Relayer. Return <code class="docutils literal notranslate"><span class="pre">ERR_STAKED_RELAYERS_ONLY</span></code> if this check fails.</p></li>
<li><p>Check if the specified <code class="docutils literal notranslate"><span class="pre">vault</span></code> exists in <code class="docutils literal notranslate"><span class="pre">Vaults</span></code> in <a class="reference internal" href="vault-registry.html#vault-registry"><span class="std std-ref">Vault Registry</span></a>. Return <code class="docutils literal notranslate"><span class="pre">ERR_VAULT_NOT_FOUND</span></code> if there is no vault with the specified account identifier.</p></li>
<li><p>Check if this <code class="docutils literal notranslate"><span class="pre">vault</span></code> has already been liquidated. If this is the case, return <code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_LIQUIDATED</span></code> (no point in duplicate reporting).</p></li>
<li><p>Check if the given Bitcoin transaction is already associated with an entry in <code class="docutils literal notranslate"><span class="pre">TheftReports</span></code> (calculate <code class="docutils literal notranslate"><span class="pre">txId</span></code> from <code class="docutils literal notranslate"><span class="pre">rawTx</span></code> as key for lookup). If yes, check if the specified <code class="docutils literal notranslate"><span class="pre">vault</span></code> is already listed in the associated set of Vaults. If the vault is already in the set, return <code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_REPORTED</span></code>.</p></li>
<li><p>Extract the <code class="docutils literal notranslate"><span class="pre">outputs</span></code> from <code class="docutils literal notranslate"><span class="pre">rawTx</span></code> using <cite>extractOutputs</cite> from the BTC-Relay.</p></li>
<li><p>Check if the transaction is a “migration” of UTXOs to the same Vault. For each output, in the extracted <code class="docutils literal notranslate"><span class="pre">outputs</span></code>, extract the recipient Bitcoin address (using <cite>extractOutputAddress</cite> from the BTC-Relay).</p>
<ol class="loweralpha simple">
<li><p>If one of the extracted Bitcoin addresses does not match a Bitcoin address of the accused <code class="docutils literal notranslate"><span class="pre">vault</span></code> (<code class="docutils literal notranslate"><span class="pre">Vault.wallet</span></code>) <strong>continue to step 7</strong>.</p></li>
<li><p>If all extracted addresses match the Bitcoin addresses of the accused <code class="docutils literal notranslate"><span class="pre">vault</span></code> (<code class="docutils literal notranslate"><span class="pre">Vault.wallet</span></code>), abort and return <code class="docutils literal notranslate"><span class="pre">ERR_VALID_MERGE_TRANSACTION</span></code>.</p></li>
</ol>
</li>
<li><p>Check if the transaction is part of a valid <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>, <a class="reference internal" href="replace.html#replace-protocol"><span class="std std-ref">Replace</span></a> or <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a> process.</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Extract the OP_RETURN value using <cite>extractOPRETURN</cite> from the BTC-Relay. If this call returns an error (no valid OP_RETURN output, hence not valid <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>, <a class="reference internal" href="replace.html#replace-protocol"><span class="std std-ref">Replace</span></a> or <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a> process), <strong>continue to step 8</strong>.</p></li>
</ol>
<ol class="loweralpha" start="3">
<li><p>Check if the extracted OP_RETURN value matches any <code class="docutils literal notranslate"><span class="pre">redeemId</span></code> in <code class="docutils literal notranslate"><span class="pre">RedeemRequest</span></code> (in <code class="docutils literal notranslate"><span class="pre">RedeemRequests</span></code> in <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>), any <code class="docutils literal notranslate"><span class="pre">replaceId</span></code> in <code class="docutils literal notranslate"><span class="pre">ReplaceRequest</span></code> (in <code class="docutils literal notranslate"><span class="pre">RedeemRequests</span></code> in <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>) or any <code class="docutils literal notranslate"><span class="pre">refundId</span></code> in <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code> (in <code class="docutils literal notranslate"><span class="pre">RefundRequests</span></code> in <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a>) entries <em>associated with this Vault</em>. If no match is found, <strong>continue to step 8</strong>.</p></li>
<li><p>Otherwise, if an associated <code class="docutils literal notranslate"><span class="pre">RedeemRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">ReplaceRequest</span></code> or <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code> was found: extract the value (using <cite>extractOutputValue</cite> from the BTC-Relay) and recipient Bitcoin address (using <cite>extractOutputAddress</cite> from the BTC-Relay). Next, check:</p>
<blockquote>
<div><p>i ) if the value is equal (or greater) than <code class="docutils literal notranslate"><span class="pre">paymentValue</span></code> in the <code class="docutils literal notranslate"><span class="pre">RedeemRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">ReplaceRequest</span></code> or <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code>.</p>
<p>ii ) if the recipient Bitcoin address matches the recipient specified in the <code class="docutils literal notranslate"><span class="pre">RedeemRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">ReplaceRequest</span></code> or <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code>.</p>
<p>iii ) if the change Bitcoin address(es) are registered to the accused <code class="docutils literal notranslate"><span class="pre">vault</span></code> (<code class="docutils literal notranslate"><span class="pre">Vault.wallet</span></code>).</p>
</div></blockquote>
</li>
</ol>
<blockquote>
<div><p>If all checks are successful, abort and return <code class="docutils literal notranslate"><span class="pre">ERR_VALID_REDEEM</span></code>, <code class="docutils literal notranslate"><span class="pre">ERR_VALID_REPLACE</span></code> or <code class="docutils literal notranslate"><span class="pre">ERR_VALID_REFUND</span></code>. Otherwise, <strong>continue to step 8</strong>.</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic" start="8">
<li><p>The vault misbehaved (displaced BTC).</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Call <a class="reference internal" href="vault-registry.html#liquidatevault"><span class="std std-ref">liquidateVault</span></a>, liquidating the vault and transferring all of its balances and collateral to the <code class="docutils literal notranslate"><span class="pre">LiquidationVault</span></code> for failure and reimbursement handling;</p></li>
<li><p>emit <code class="docutils literal notranslate"><span class="pre">ReportVaultTheft(vaultId)</span></code></p></li>
</ol>
</div></blockquote>
</li>
<li><p>Return</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id13">
<h3>RegisterStakedRelayer<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>Emit an event stating that a new staked relayer was registered and provide information on the Staked Relayer’s stake</p>
<p><em>Event Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">RegisterStakedRelayer(StakedRelayer,</span> <span class="pre">collateral)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>: newly registered staked Relayer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stake</span></code>: stake provided by the staked relayer upon registration</p></li>
</ul>
<p><em>Functions</em></p>
<ul class="simple">
<li><p><a class="reference internal" href="#registerstakedrelayer"><span class="std std-ref">registerStakedRelayer</span></a></p></li>
</ul>
</div>
<div class="section" id="id14">
<h3>DeRegisterStakedRelayer<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>Emit an event stating that a staked relayer has been de-registered</p>
<p><em>Event Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">DeRegisterStakedRelayer(StakedRelayer)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>: account identifier of de-registered Staked Relayer</p></li>
</ul>
<p><em>Functions</em></p>
<ul class="simple">
<li><p><a class="reference internal" href="#deregisterstakedrelayer"><span class="std std-ref">deRegisterStakedRelayer</span></a></p></li>
</ul>
</div>
<div class="section" id="id15">
<h3>SlashStakedRelayer<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>Emits an event indicating that a staked relayer has been slashed.</p>
<p><em>Event Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">SlashStakedRelayer(stakedRelayer)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stakedRelayer</span></code>: account identifier of the slashed staked relayer.</p></li>
</ul>
<p><em>Functions</em></p>
<ul class="simple">
<li><p><a class="reference internal" href="#slashstakedrelayer"><span class="std std-ref">slashStakedRelayer</span></a></p></li>
</ul>
</div>
<div class="section" id="id16">
<h3>ReportVaultTheft<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>Emits an event when a vault has been accused of theft.</p>
<p><em>Event Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">ReportVaultTheft(vault)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vault</span></code>: account identifier of the vault accused of theft.</p></li>
</ul>
<p><em>Functions</em></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="errors">
<h2>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ERR_NOT_REGISTERED</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “This AccountId is not registered as a Staked Relayer.”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#deregisterstakedrelayer"><span class="std std-ref">deRegisterStakedRelayer</span></a>, <a class="reference internal" href="#slashstakedrelayer"><span class="std std-ref">slashStakedRelayer</span></a></p></li>
<li><p><strong>Cause</strong>: The given account identifier is not registered.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_GOVERNANCE_ONLY</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “This action can only be executed by the Governance Mechanism”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#slashstakedrelayer"><span class="std std-ref">slashStakedRelayer</span></a></p></li>
<li><p><strong>Cause</strong>: The suggested status (<code class="docutils literal notranslate"><span class="pre">SHUTDOWN</span></code>) can only be triggered by the Governance Mechanism but the caller of the function is not part of the Governance Mechanism.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_STAKED_RELAYERS_ONLY</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “This action can only be executed by Staked Relayers”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>: The caller of this function was not a Staked Relayer. Only Staked Relayers are allowed to suggest and vote on BTC Parachain status updates.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_REPORTED</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “This txId has already been logged as a theft by the given Vault”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>: This transaction / vault combination has already been reported.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_VAULT_NOT_FOUND</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “There exists no vault with the given account id”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>:  The specified vault does not exist.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_ALREADY_LIQUIDATED</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “This vault is already being liquidated”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>:  The specified vault is already being liquidated.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_REDEEM</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “The given transaction is a valid Redeem execution by the accused Vault”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>: The given transaction is associated with a valid <a class="reference internal" href="redeem.html#redeem-protocol"><span class="std std-ref">Redeem</span></a>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_REPLACE</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “The given transaction is a valid Replace execution by the accused Vault”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>: The given transaction is associated with a valid <a class="reference internal" href="replace.html#replace-protocol"><span class="std std-ref">Replace</span></a>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_REFUND</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “The given transaction is a valid Refund execution by the accused Vault”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>: The given transaction is associated with a valid <a class="reference internal" href="refund.html#refund-protocol"><span class="std std-ref">Refund</span></a>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ERR_VALID_MERGE_TRANSACTION</span></code></p>
<ul class="simple">
<li><p><strong>Message</strong>: “The given transaction is a valid ‘UTXO merge’ transaction by the accused Vault”</p></li>
<li><p><strong>Function</strong>: <a class="reference internal" href="#reportvaulttheft"><span class="std std-ref">reportVaultTheft</span></a></p></li>
<li><p><strong>Cause</strong>: The given transaction represents an allowed “merging” of UTXOs by the accused vault (no BTC was displaced).</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="treasury.html" class="btn btn-neutral float-right" title="Treasury" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sla.html" class="btn btn-neutral float-left" title="SLA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Interlay

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>